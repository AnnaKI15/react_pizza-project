{"ast":null,"code":"const initialState = {\n  items: {},\n  totalPrice: 0,\n  totalCount: 0\n};\n\nconst getTotalPrice = arr => arr.reduce((sum, obj) => obj.price + sum, 0);\n\nconst _get = (obj, path) => {\n  const [firstKey, ...keys] = path.split('.');\n  return keys.reduce((val, key) => {\n    return val[key];\n  }, obj[firstKey]);\n};\n\nconst getTotalSum = (obj, path) => {\n  return Object.values(obj).reduce((sum, obj) => {\n    const value = _get(obj, path);\n\n    return sum + value;\n  }, 0);\n};\n\nconst cart = (state = initialState, action) => {\n  switch (action.type) {\n    case 'ADD_PIZZA_CART':\n      {\n        const currentPizzasItems = !state.items[action.payload.id] ? [action.payload] : [...state.items[action.payload.id].items, action.payload];\n        const newItems = { ...state.items,\n          [action.payload.id]: {\n            items: currentPizzasItems,\n            totalPrice: getTotalPrice(currentPizzasItems)\n          }\n        };\n        const totalCount = getTotalSum(newItems, 'items.length');\n        const totalPrice = getTotalSum(newItems, 'totalPrice');\n        return { ...state,\n          items: newItems,\n          totalCount,\n          // allPizzas.length\n          totalPrice\n        };\n      }\n\n    case 'REMOVE_CART_ITEM':\n      {\n        const newItems = { ...state.items\n        };\n        const currentTotalCount = newItems[action.payload].items.length;\n        const currentTotalPrice = newItems[action.payload].totalPrice;\n        delete newItems[action.payload];\n        return { ...state,\n          items: newItems,\n          totalPrice: state.totalPrice - currentTotalPrice,\n          totalCount: state.totalCount - currentTotalCount\n        };\n      }\n\n    case 'PLUS_CART_ITEM':\n      {\n        const newObjItems = [...state.items[action.payload].items, state.items[action.payload].items[0]];\n        const newItems = { ...state.items,\n          [action.payload]: {\n            items: newObjItems,\n            totalPrice: getTotalPrice(newObjItems)\n          }\n        };\n        const totalCount = getTotalSum(newItems, 'items.length');\n        const totalPrice = getTotalSum(newItems, 'totalPrice');\n        return { ...state,\n          items: newItems,\n          totalCount,\n          totalPrice\n        };\n      }\n\n    case 'MINUS_CART_ITEM':\n      {\n        const oldItems = state.items[action.payload].items;\n        const newObjItems = oldItems.length > 1 ? state.items[action.payload].items.slice(1) : oldItems;\n        const newItems = { ...state.items,\n          [action.payload]: {\n            items: newObjItems,\n            totalPrice: getTotalPrice(newObjItems)\n          }\n        };\n        const totalCount = getTotalSum(newItems, 'items.length');\n        const totalPrice = getTotalSum(newItems, 'totalPrice');\n        return { ...state,\n          items: newItems,\n          totalCount,\n          totalPrice\n        };\n      }\n\n    case 'Clear_Cart':\n      {\n        return { ...state,\n          items: {},\n          totalPrice: 0,\n          totalCount: 0\n        };\n      }\n\n    default:\n      return state;\n  }\n};\n\nexport default cart;","map":{"version":3,"sources":["C:/Users/User/Git/pizza-project/src/redux/reducer/cart.js"],"names":["initialState","items","totalPrice","totalCount","getTotalPrice","arr","reduce","sum","obj","price","_get","path","firstKey","keys","split","val","key","getTotalSum","Object","values","value","cart","state","action","type","currentPizzasItems","payload","id","newItems","currentTotalCount","length","currentTotalPrice","newObjItems","oldItems","slice"],"mappings":"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","sourcesContent":["const initialState = {\n    items: {},\n    totalPrice: 0,\n    totalCount: 0,\n};\n\nconst getTotalPrice = (arr) => arr.reduce((sum, obj) => obj.price + sum, 0);\n\nconst _get = (obj, path) => {\n  const [firstKey, ...keys] = path.split('.');\n  return keys.reduce((val, key) => {\n    return val[key];\n  }, obj[firstKey]);\n};\n\nconst getTotalSum = (obj, path) => {\n  return Object.values(obj).reduce((sum, obj) => {\n    const value = _get(obj, path);\n    return sum + value;\n  }, 0);\n};\n\nconst cart = (state = initialState , action) => {\n    switch (action.type) {\n        case 'ADD_PIZZA_CART':{\n            const currentPizzasItems = !state.items[action.payload.id]\n                ? [action.payload]\n                : [...state.items[action.payload.id].items, action.payload];\n            const newItems = {\n                ...state.items,\n                [action.payload.id]:{\n                items: currentPizzasItems,\n                totalPrice: getTotalPrice(currentPizzasItems)\n            },\n        };\n\n        \n        const totalCount = getTotalSum(newItems, 'items.length');\n        const totalPrice = getTotalSum(newItems, 'totalPrice');\n            return{\n            ...state,\n            items: newItems,\n            totalCount, // allPizzas.length\n            totalPrice,     \n        };\n    }\n    case 'REMOVE_CART_ITEM' :{\n        const newItems = {\n            ...state.items,\n        };\n        const currentTotalCount = newItems[action.payload].items.length;\n        const currentTotalPrice = newItems[action.payload].totalPrice;\n        delete newItems[action.payload];\n        return{\n            ...state,\n            items: newItems,\n            totalPrice: state.totalPrice - currentTotalPrice,\n            totalCount: state.totalCount - currentTotalCount,\n        };\n    }\n    case 'PLUS_CART_ITEM': {\n      const newObjItems = [\n        ...state.items[action.payload].items,\n        state.items[action.payload].items[0],\n      ];\n      const newItems = {\n        ...state.items,\n        [action.payload]: {\n          items: newObjItems,\n          totalPrice: getTotalPrice(newObjItems),\n        },\n      };\n\n      const totalCount = getTotalSum(newItems, 'items.length');\n      const totalPrice = getTotalSum(newItems, 'totalPrice');\n\n      return {\n        ...state,\n        items: newItems,\n        totalCount,\n        totalPrice,\n      };\n    }\n\n    case 'MINUS_CART_ITEM': {\n      const oldItems = state.items[action.payload].items;\n      const newObjItems =\n        oldItems.length > 1 ? state.items[action.payload].items.slice(1) : oldItems;\n      const newItems = {\n        ...state.items,\n        [action.payload]: {\n          items: newObjItems,\n          totalPrice: getTotalPrice(newObjItems),\n        },\n      };\n\n      const totalCount = getTotalSum(newItems, 'items.length');\n      const totalPrice = getTotalSum(newItems, 'totalPrice');\n\n      return {\n        ...state,\n        items: newItems,\n        totalCount,\n        totalPrice,\n      };\n    }\n\n    case 'Clear_Cart' :{\n        return{\n            ...state,\n            items: {},\n            totalPrice: 0,\n            totalCount: 0,\n        };\n    }\n        default:\n           return state;\n    }\n};\n\n\nexport default cart;"]},"metadata":{},"sourceType":"module"}